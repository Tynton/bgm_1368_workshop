namespace = BGMSC

country_event = { #Death of Stefan Uros
	id = BGMSC.1
	title = "BGMSC.1.t"
	desc = "BGMSC.1.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	is_triggered_only = yes

	major = yes

	immediate = {
		bgm_remove_pol_power = yes
	}

	option = {
		name = "BGMSC.1.a"
		set_country_flag = serbian_collapse_started
		add_stability = -6
		kill_ruler = yes
		if = {
			limit = { 
				has_heir = yes
			}
			kill_heir = { allow_new_heir = no }
		}
	}
}


country_event = { #good ending
	id = BGMSC.2
	title = "BGMSC.2.t"
	desc = "BGMSC.2.d"
	picture = GOOD_WITH_MONARCH_eventPicture

	is_triggered_only = yes

	major = yes

	option = {
		name = "BGMSC.2.a"
		end_disaster = serbian_collapse
		clr_country_flag = serbian_collapse_started
		set_country_flag = serbian_collapse_happened
		add_prestige = 50
	}
}

country_event = { #bad ending
	id = BGMSC.3
	title = "BGMSC.3.t"
	desc = "BGMSC.3.d"
	picture = BAD_WITH_MONARCH_eventPicture

	trigger = {
		NOT = { stability = 1 }
		has_disaster = serbian_collapse
		has_country_flag = mce_revolt
		has_country_flag = the_revolt
		has_country_flag = pri_revolt
		has_country_flag = zet_revolt
		has_country_flag = mon_revolt
		has_country_flag = alb_revolt
	}

	mean_time_to_happen = {
		months = 42
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = mce_revolt
			clr_country_flag = the_revolt
			clr_country_flag = pri_revolt
			clr_country_flag = zet_revolt
			clr_country_flag = mon_revolt
			clr_country_flag = alb_revolt
		}
	}

	option = {
		name = "BGMSC.3.a"
		clr_country_flag = serbian_collapse_started
		set_country_flag = serbian_collapse_happened
		end_disaster = serbian_collapse
		add_prestige = -50
		set_government_rank = 1
	}
}

country_event = { #Secession of Macedonia
	id = BGMSC.4
	title = "BGMSC.4.t"
	desc = "BGMSC.4.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = mce_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = MCE
		hidden_effect = {
			MCE = {
				add_manpower = 7
				capital_scope = {
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						cavalry = PREV
					}
					MCE = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = MCE
		declare_war_with_cb = {
			casus_belli = cb_core
			who = MCE
		}
		hidden_effect = {
			MCE = {
				add_manpower = 7
				capital_scope = {
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						infantry = PREV
					}
					MCE = {
						cavalry = PREV
					}
					MCE = {
						cavalry = PREV
					}
				}
			}
		}
	}
}

country_event = { #Secession of Thessaly
	id = BGMSC.5
	title = "BGMSC.5.t"
	desc = "BGMSC.5.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
		NOT = {
			exists = THE
		}
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = the_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = THE
		hidden_effect = {
			THE = {
				add_manpower = 7
				capital_scope = {
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						cavalry = PREV
					}
					THE = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = THE
		declare_war_with_cb = {
			casus_belli = cb_core
			who = THE
		}
		hidden_effect = {
			THE = {
				add_manpower = 7
				capital_scope = {
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						infantry = PREV
					}
					THE = {
						cavalry = PREV
					}
					THE = {
						cavalry = PREV
					}
				}
			}
		}
	}
}

country_event = { #Secession of Prilep
	id = BGMSC.6
	title = "BGMSC.6.t"
	desc = "BGMSC.6.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
		owns = 4780
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = pri_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = PRI
		hidden_effect = {
			PRI = {
				add_manpower = 7
				capital_scope = {
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						cavalry = PREV
					}
					PRI = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = PRI
		declare_war_with_cb = {
			casus_belli = cb_core
			who = PRI
		}
		hidden_effect = {
			PRI = {
				add_manpower = 7
				capital_scope = {
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						infantry = PREV
					}
					PRI = {
						cavalry = PREV
					}
					PRI = {
						cavalry = PREV
					}
				}
			}
		}
	}
}

country_event = { #Secession of Zeta
	id = BGMSC.7
	title = "BGMSC.7.t"
	desc = "BGMSC.7.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
		owns = 4780
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = zet_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = ZET
		hidden_effect = {
			ZET = {
				add_manpower = 7
				capital_scope = {
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						cavalry = PREV
					}
					ZET = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = ZET
		declare_war_with_cb = {
			casus_belli = cb_core
			who = ZET
		}
		hidden_effect = {
			ZET = {
				add_manpower = 7
				capital_scope = {
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						infantry = PREV
					}
					ZET = {
						cavalry = PREV
					}
					ZET = {
						cavalry = PREV
					}
				}
			}
		}
	}
}

country_event = { #Secession of Montenegro
	id = BGMSC.8
	title = "BGMSC.8.t"
	desc = "BGMSC.8.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
		owns = 4780
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = mon_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = MON
		hidden_effect = {
			MON = {
				add_manpower = 7
				capital_scope = {
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						cavalry = PREV
					}
					MON = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = MON
		declare_war_with_cb = {
			casus_belli = cb_core
			who = MON
		}
		hidden_effect = {
			MON = {
				add_manpower = 7
				capital_scope = {
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						infantry = PREV
					}
					MON = {
						cavalry = PREV
					}
					MON = {
						cavalry = PREV
					}
				}
			}
		}
	}
}

country_event = { #Secession of Albania
	id = BGMSC.9
	title = "BGMSC.9.t"
	desc = "BGMSC.9.d"
	picture = COUNTRY_COLLAPSE_eventPicture

	fire_only_once = yes

	trigger = {
		has_disaster = serbian_collapse
		owns = 4780
	}

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_country_flag = alb_revolt
	}

	option = { #let them go
		name = "BGMSC.4.a"
		release = ALB
		hidden_effect = {
			ALB = {
				add_manpower = 7
				capital_scope = {
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						cavalry = PREV
					}
					ALB = {
						cavalry = PREV
					}
				}
			}
		}
	}

	option = { #fight them
		name = "BGMSC.4.b"
		ai_chance = {
			factor = 0
		}
		release = ALB
		declare_war_with_cb = {
			casus_belli = cb_core
			who = ALB
		}
		hidden_effect = {
			ALB = {
				add_manpower = 7
				capital_scope = {
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						infantry = PREV
					}
					ALB = {
						cavalry = PREV
					}
					ALB = {
						cavalry = PREV
					}
				}
			}
		}
	}
}