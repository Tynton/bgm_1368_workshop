namespace = BGM_provinces

#Founding of Le Havre

province_event = {
	id = BGM_provinces.1
	title = "BGM_provinces.n.1"
	desc = "BGM_provinces.d.1"
	picture = SHIP_SAILING_eventPicture

	fire_only_once = yes
	
	trigger = {
		NOT = { has_province_flag = le_havre_made }
		has_province_modifier = seine_estuary_modifier
		OR = {
			province_trade_power = 15
			development = 20
			has_building = drydock
			has_building = grand_shipyard
		}
		OR = {
			has_building = dock
			has_building = drydock
			has_building = shipyard
			has_building = grand_shipyard
		}
		owner = {
			OR = {
				bgm_colonial_subject = yes
				has_institution = new_world_i
			}
		}
		OR = {
			owner = {
				OR = {
					culture_group = french
					culture_group = occitan
				}
				capital_scope = {
					region = france_region
				}
			}
			owner = {
				culture_group = benelux
				capital_scope = {
					OR = {
						region = france_region
						region = low_countries_region
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 28

		modifier = {
			factor = 0.75
			owner = {
				treasury = 1000
			}
		}
	}
	
	option = {
		name = "BGM_provinces.1.a"

		set_province_flag = le_havre_made

		custom_tooltip = le_havre_tooltip

		center_of_trade = 1
		add_base_production = 2
		add_base_tax = 2
		add_base_manpower = 2

		add_province_modifier = {
			name = port_le_havre
			duration = -1
		}

		if = {
			limit = {
				owner = {
					NOT = {
						OR = {
							primary_culture = anglo_norman
							primary_culture = normand
							primary_culture = angevin
						}
					}
				}
			}
			change_province_name = "Le Havre"
		}
		if = {
			limit = {
				owner = {
					OR = {
						primary_culture = anglo_norman
						primary_culture = normand
						primary_culture = angevin
					}
				}
			}
			change_province_name = "Lé Hâvre"
		}
	}
}

#Italian/German province revolt

country_event = {
	id = BGM_provinces.2
	title = "BGM_provinces.n.2"
	desc = {
		trigger = {
			culture_group = latin
		}
		desc = "BGM_provinces.d.2a"
	}
	desc = {
		trigger = {
			culture_group = germanic
		}
		desc = "BGM_provinces.d.2b"
	}
	picture = MODERN_UNREST_eventPicture
	
	trigger = {
		always = no
		has_institution = nationalism_institution
		any_owned_province = {
			OR = {
				culture_group = germanic
				culture_group = latin
			}
		}
		OR = {
			AND = {
				NOT = { culture_group = germanic }
				NOT = { has_country_flag = had_ger_revolt }
				exists = GER
				any_neighbor_country = {
					tag = GER
				}
			}
			AND = {
				NOT = { culture_group = latin }
				NOT = { has_country_flag = had_ita_revolt }
				OR = {
					exists = ITA
					exists = VIY
				}
				any_neighbor_country = {
					OR = {
						tag = ITA
						tag = VIY
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 28

		modifier = {
			factor = 0.75
			NOT = { great_power_rank = 4 }
		}
	}
	
	option = {
		name = "BGM_provinces.2.a"
		if = {
			limit = { 
				any_neighbor_country = {
					tag = GER
				}
			}
			every_owned_province = {
				limit = {
					culture_group = germanic
					likely_rebels = nationalist_rebels
				}
				change_controller = REB
				random_list = {
					50 = {

					}
					20 = {
						spawn_rebels = {
							size = 1
							type = nationalist_rebels
							friend = GER
						}
					}
					15 = {
						spawn_rebels = {
							size = 2
							type = nationalist_rebels
							friend = GER
						}
					}
					15 = {
						spawn_rebels = {
							size = 3
							type = nationalist_rebels
							friend = GER
						}
					}
				}
			}
		}


		if = {
			limit = { 
				any_neighbor_country = {
					tag = ITA
				}
			}
			every_owned_province = {
				limit = {
					culture_group = latin
					likely_rebels = nationalist_rebels
				}
				change_controller = REB
				random_list = {
					50 = {

					}
					20 = {
						spawn_rebels = {
							size = 1
							type = nationalist_rebels
							friend = ITA
						}
					}
					15 = {
						spawn_rebels = {
							size = 2
							type = nationalist_rebels
							friend = ITA
						}
					}
					15 = {
						spawn_rebels = {
							size = 3
							type = nationalist_rebels
							friend = ITA
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				any_neighbor_country = {
					tag = VIY
				}
			}
			every_owned_province = {
				limit = {
					culture_group = latin
					likely_rebels = nationalist_rebels
				}
				change_controller = REB
				random_list = {
					50 = {

					}
					20 = {
						spawn_rebels = {
							size = 1
							type = nationalist_rebels
							friend = VIY
						}
					}
					15 = {
						spawn_rebels = {
							size = 2
							type = nationalist_rebels
							friend = VIY
						}
					}
					15 = {
						spawn_rebels = {
							size = 3
							type = nationalist_rebels
							friend = VIY
						}
					}
				}
			}
		}

		ai_chance = {
			factor = 0
		}
	}

	option = { #cede land
		name = "BGM_provinces.2.b"
		if = {
			limit = { 
				exists = GER
			}
			every_owned_province = {
				limit = {
					culture_group = germanic
				}
				cede_province = GER
				add_core = GER
				remove_core = ROOT
			}
		}

		if = {
			limit = { 
				exists = ITA
			}
			every_owned_province = {
				limit = {
					culture_group = latin
				}
				cede_province = ITA
				add_core = ITA
				remove_core = ROOT
			}
		}
		else_if = {
			limit = { 
				exists = VIY
			}
			every_owned_province = {
				limit = {
					culture_group = latin
				}
				cede_province = VIY
				add_core = VIY
				remove_core = ROOT
			}
		}
	}
}