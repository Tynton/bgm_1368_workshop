# OBS! Full modding not supported. Code support still needed to remove/rename the original subject types.
# Custom ones CAN be created with scriptable diplomatic actions (see "dummy" at the bottom of this file), although this is not currently very functional.

# If used, copy_from should be put at the very top ( things above it will be overwitten )

# Triggers will be evaluated in the scope of the Subject, with the Overlord as its FROM scope.
# Exception: is_potential_overlord is evaluated in the scope of the potential Overlord, with no particular subject in mind.

# count = x is used (means it "counts as" x in some triggers).

# copy_from copies everything except count, is_potential_overlord, and can_be_established

# relative_power_class decides how Subjects are grouped together when considering relative strenghth towards overlord:
# If it is 0 they won't consider relative power and if it is 1 they will only consider their own power (and those supporting their independence) compared to their Overlord's.
# Otherwise they will sum up the power of every Subject of the same relative_power_class as themselves, and all countries who support either themselves or one of their allies in the same relative_power_class.

# diplomacy_view_class decides how subjects are grouped together in diplomacy view and in foreign province view:
# 0 means it won't be listed
# 1 means it will be listed together only with the same subject type
# Other values means it will be listed together with all subjects of the same diplomacy_view_class

# The following status checks are considered in old triggers:

# is_colonial_nation  & is_former_colonial_nation
#        checks the 'has_colonial_parent = yes' attribute

# is_lesser_in_union, junior_union_with, senior_union_with & years_in_union_under
#		checks the 'has_overlords_ruler = yes' attribute


# Forward declaring all subject types so they can refer to each other in triggers etc.
colonial_protectorate = {}

colonial_protectorate = {
	copy_from = default
	can_have_great_projects_moved_by_overlord = no

	# Triggers:
	is_potential_overlord = {
	}
	
	# Graphics:
	sprite = GFX_icon_trade_protectorate
	diplomacy_overlord_sprite = GFX_icon_diplomacy_lead_trade_protectorate
	diplomacy_subject_sprite = GFX_icon_diplomacy_am_trade_protectorate
        

	# Properties:
	can_fight_independence_war = yes
	joins_overlords_wars = no
	joins_colonial_wars = no
	can_be_co_belligerented = yes    #Enemies can force this subject to join its overlord into the defense war. Only used when the subject has the "joins_overlords_wars = no". By default it's "no".
	#can_be_called_to_wars = yes    #Overlord can ask subject to join wars like it could ask allies to join. You would require favors  to call them to wars. Only used when the subject has the "joins_overlords_wars = no". By default it's "no"
	opinion_cost_to_join_offensive_wars = 50   #Defines how much opinion the subject loses of the overlord to call the subject into an offensive war. Applied if you do not have Leviathan
	opinion_cost_to_join_defensive_wars = 20   #Defines how much opinion the subject loses of the overlord to call the subject into a defensive war. Applied if you do not have Leviathan
	opinion_cost_instead_of_favors_cost = yes   #Determines if the subject requires favors or opinion to join a the war. If set "yes" then it requires the aforementioned opinion costs - regardless if Leviathan is active or not. "No" is the default setting
	opinion_on_subject_integration = 0 #Determines how much opinion they actually lose when a fellow subject gets integrated.
	overlord_can_attack = yes
	takes_diplo_slot = no
	base_liberty_desire = -10
	relative_power_class = 1
	should_quit_wars_on_activation = no
	can_have_subjects_of_other_types = yes
	uses_military_focus = no
	overlord_protects_external = yes
	counts_for_borders = yes
	can_use_claims = no
	share_rebel_popup = yes
	can_transfer_in_peace = no
	can_set_mil_focus = no
	can_send_missionary_to_subject = no
	overlord_can_fabricate_for = no
	does_overlord_size_count_for_warscore_cost = no
	can_concentrate_development = no
	transfer_trade_power = yes
	
	liberty_desire_development_ratio = 0.175
	trust_on_start = 0

	pays_overlord = 1.0									# 1.0 represents the amount payed by vassals
	
	overlord_opinion_modifier = colonial_protectorate
	subject_opinion_modifier = colonial_protectorate
	
	can_fight = {
		independent_nations = yes
		other_overlord = all
	}
	can_rival = {
		independent_nations = yes
		other_overlord = all
	}
	can_ally = {
		independent_nations = yes
		other_overlord = all
	}
	can_marry = {
		independent_nations = yes
		other_overlord = all
	}

	# Subject Interactions:
	# (immediate)
	block_settlement_growth = no
	allow_settlement_growth = no
	divert_trade = yes

	# Modifiers:
	modifier_subject = clear # Trade Protectorate don't get the ordinary subject_nation penalty 
	modifier_subject = {
		modifier = trade_protectorate_subject_modifier
	}
	modifier_subject = {
		modifier = trade_protectorate_low_development_subject_modifier
		trigger = {
			NOT = { total_development = 200 }
		}
	}
	modifier_overlord = {
		modifier = trade_protectorate_overlord_modifier
	}
	modifier_subject = {
		modifier = gbr_emperor_of_india_subject_bonus
		trigger = {
			overlord = {
				has_country_modifier = gbr_emperor_of_india
			}
		}
	}
}