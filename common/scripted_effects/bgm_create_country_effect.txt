create_italy = {
	if = {
        limit = {
            is_part_of_hre = yes
            is_elector = no
            is_emperor = no
        }
        emperor = {
            add_opinion = {
                who = root
                modifier = opinion_left_empire
            }
        }
        set_in_empire = no
        emperor = {
            country_event = { id = hre_event.5 }
        }
    }
    #namechange = yes
    if = {
        limit = {
            NOT = { government_rank = 2 }
        }
        hidden_effect = {
            set_in_empire = no
        }
        set_government_rank = 2
    }
    if = {
        limit = {
            NOT = {
                OR = {
                    has_country_flag = monaco_c
                    primary_culture = venetian
                }
            }
        }
        change_tag = ITA
        #this is so that a tier 1 reform is always selected, preventing the user from just never selecting one and enjoying loads of absolutism
        if = {
            limit = {
                NOT = { has_reform_on_level = 0 }
            }
            add_government_reform = signoria_reform
        }
        italy_region = {
            limit = {
                NOT = { owned_by = ROOT }
            }
            add_permanent_claim = ITA
        }
        add_prestige = 25
        ITA = {
            set_capital = 118
        }
    }
    if = {
        limit = {
            primary_culture = venetian
        }
        change_tag = VIY
        #this is so that a tier 1 reform is always selected, preventing the user from just never selecting one and enjoying loads of absolutism
        if = {
            limit = {
                NOT = { has_reform_on_level = 0 }
            }
            add_government_reform = signoria_reform
        }
        italy_region = {
            limit = {
                NOT = { owned_by = ROOT }
            }
            add_permanent_claim = VIY
        }
        add_prestige = 25
        VIY = {
            set_capital = 118
        }
    }

    every_subject_country = {
        limit = {
            is_neighbor_of = ROOT
            ai = yes
            culture_group = latin
            capital_scope = {
                continent = ROOT
            }
        }
        ROOT = {
            inherit = PREV
        }
    }
    #if = {
    #	limit = {
    #		has_country_flag = monaco_c
    #	}
    #	change_tag = MIT
    #	#this is so that a tier 1 reform is always selected, preventing the user from just never selecting one and enjoying loads of absolutism
    #	if = {
    #		limit = {
    #			NOT = { has_reform_on_level = 0 }
    #		}
    #		add_government_reform = signoria_reform
    #	}
    #	italy_region = {
    #		limit = {
    #			NOT = { owned_by = ROOT }
    #		}
    #		add_permanent_claim = MIT
    #	}
    #	add_prestige = 25
    #	MIT = {
    #		set_capital = 118
    #	}
    #}
    if = {
        limit = { has_custom_ideas = no }
        country_event = { id = ideagroups.1 } #Swap Ideas
    }
    swap_non_generic_missions = yes
    set_country_flag = formed_italy_flag
}

create_germany = {
    if = {
        limit = {
            OR = {
                primary_culture = czech
                primary_culture = moravian
                primary_culture = schlesian
            }
        }
        change_tag = NME
    }
    if = {
        limit = {
            NOT = {
                OR = {
                    primary_culture = czech
                    primary_culture = moravian
                    primary_culture = schlesian
                }
            }
        }
        change_tag = GER
    }
    restore_country_name_effect = yes

    if = {
        limit = {
            OR = {
                primary_culture = austrian
                primary_culture = south_tyrolean
                primary_culture = konstanzer
            }
        }
        change_country_color = {
            color = { 250 217 237 } #250 237 217
        }
    }
    if = {
        limit = {
            OR = {
                primary_culture = hessian
                primary_culture = ripuarian
                primary_culture = moselle_franconian
                primary_culture = palatine
                primary_culture = hannoverian
                primary_culture = swiss
            }
        }
        change_country_color = {
            color = { 135 87 31 }
        }
    }
    if = {
        limit = {
            primary_culture = bavarian
        }
        change_country_color = {
            color = { 55 47 117 }
        }
    }
    if = {
        limit = {
            OR = {
                primary_culture = eastphalian
                primary_culture = lower_saxon
                primary_culture = schleswig_holsteiner
                primary_culture = pommeranian
                primary_culture = east_pomeranian
            }
        }
        change_country_color = {
            color = { 157 162 171 }
        }
    }

    #namechange = yes

    every_subject_country = {
        limit = {
            is_neighbor_of = ROOT
            ai = yes
            culture_group = germanic
            capital_scope = {
                continent = ROOT
            }
        }
        ROOT = {
            inherit = PREV
        }
    }

    emperor = {
        add_opinion = {
            who = root
            modifier = opinion_left_empire
        }
    }
    set_in_empire = no
    emperor = {
        country_event = { id = hre_event.5 }
    }
    #GER = { set_government_rank = 3 }
    north_german_region = {
        limit = {
            NOT = { owned_by = ROOT }
        }
        add_permanent_claim = GER
    }
    south_german_region = {
        limit = {
            NOT = { owned_by = ROOT }
        }
        add_permanent_claim = GER
    }			
    add_country_modifier = {
        name = "centralization_modifier"
        duration = 7300
    }
    add_prestige = 25
    set_country_flag = formed_germany_flag
    if = {
        limit = {
            has_custom_ideas = no
        }
        country_event = { id = ideagroups.1 } #Swap Ideas
    }
    swap_non_generic_missions = yes
}